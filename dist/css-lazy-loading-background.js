!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["css-lazy-loading-background"]={})}(this,(function(e){"use strict";"undefined"==typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{configurable:!0,get:function(){return this}}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);class t{static isHostMethod(e,t){if(!e)return!1;const o=typeof e[t];return this.reUnknown.test(o)||this.reMethod.test(o)&&Boolean(e)||!1}}t.reMethod=/^(function|object)$/,t.reUnknown=/^unknown$/;e.CssLazyLoadingBackground=class{constructor(){this.lazyBackgroundObserver=null,this.isIntersectionObserverSupported=t.isHostMethod(globalThis,"IntersectionObserver")}initialise(){const e=()=>{const e=Array.from(document.querySelectorAll("*"));if(0===e.length)return;const t=e=>{if(!1===e.isIntersecting)return;const t=e.target,o=globalThis.getComputedStyle(t).getPropertyValue("--background-image-lazy");0!==o.length&&(t.style.backgroundImage=`url('${o}')`,this.lazyBackgroundObserver.unobserve(t))},o=e=>{this.lazyBackgroundObserver.observe(e)},n=e=>{const t=globalThis.getComputedStyle(e).getPropertyValue("--background-image-lazy");null!==t&&(e.style.backgroundImage=`url('${t}')`)};this.isIntersectionObserverSupported?(this.lazyBackgroundObserver=new IntersectionObserver((e=>{e.forEach(t)})),e.forEach(o)):e.forEach(n)};"string"==typeof document.readyState&&"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e,!0)}}}));
